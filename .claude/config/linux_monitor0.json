{
  "platform": "linux",
  "launch_monitor": 0,
  "example_ron_path": "~/.config/restore_window/windows.ron",
  "test_ron_dir": ".claude/config/ron/linux_0",

  "tests": [
    {
      "id": "wayland_size_restore",
      "description": "Size persistence on Monitor 0 (position not available on Wayland)",
      "automation": "full",
      "backend": "wayland",
      "ron_file": "size_restore.ron",
      "mutation": {
        "target_monitor": 0,
        "size": [1200, 1000]
      },
      "validate": ["size", "mode", "monitor_index"]
    },
    {
      "id": "wayland_borderless_0_0",
      "description": "Borderless fullscreen restore to Monitor 0 (same monitor)",
      "automation": "full",
      "backend": "wayland",
      "ron_file": "fullscreen_borderless_to_mon0.ron",
      "validate": ["mode", "monitor_index"]
    },
    {
      "id": "wayland_borderless_0_1",
      "description": "Borderless fullscreen restore to Monitor 1 (cross monitor)",
      "automation": "full",
      "backend": "wayland",
      "ron_file": "fullscreen_borderless_to_mon1.ron",
      "validate": ["mode", "monitor_index"]
    },
    {
      "id": "wayland_exclusive_fallback_0_0",
      "description": "Exclusive fullscreen falls back to borderless on Wayland (same monitor)",
      "note": "Cross-monitor variant not needed - borderless cross-monitor already tested, and exclusive->borderless fallback is the same code path regardless of monitor",
      "automation": "full",
      "backend": "wayland",
      "ron_file": "fullscreen_exclusive_to_mon0.ron",
      "expected_log_warning": "Exclusive fullscreen is not supported on Wayland, restoring as BorderlessFullscreen",
      "validate": ["mode", "monitor_index"],
      "expected_mode": "BorderlessFullscreen"
    },
    {
      "id": "x11_pos_size_restore",
      "description": "Basic position/size persistence on Monitor 0 (eDP)",
      "automation": "full",
      "backend": "x11",
      "workaround_keys": ["W5", "W6"],
      "ron_file": "position_size_restore.ron",
      "mutation": {
        "target_monitor": 0,
        "position_offset": [300, 250],
        "size": [1200, 800]
      },
      "validate": ["position", "size", "mode", "monitor_index"],
      "workaround_validation": {
        "feature_flag": "workaround-winit-4445",
        "build_without": "--no-default-features --features workaround-winit-4443",
        "build_with": "",
        "without_behavior": "Position drifts by title bar height (~56px at scale 2) on save/restore",
        "with_behavior": "Position saved correctly with frame extent compensation"
      }
    },
    {
      "id": "x11_cross_high_to_low",
      "description": "Window saved on Monitor 1 (HDMI, scale 1) restores correctly when launched from Monitor 0 (eDP, scale 2)",
      "automation": "full",
      "backend": "x11",
      "workaround_keys": ["W5", "W6"],
      "requires": {"min_monitors": 2, "different_scales": true},
      "ron_file": "cross_monitor_high_to_low.ron",
      "validate": ["position", "size", "monitor_index", "mode"]
    },
    {
      "id": "x11_borderless_0_0",
      "description": "Borderless fullscreen restore to Monitor 0 (same monitor)",
      "automation": "full",
      "backend": "x11",
      "ron_file": "fullscreen_borderless_to_mon0.ron",
      "validate": ["mode", "monitor_index"]
    },
    {
      "id": "x11_borderless_0_1",
      "description": "Borderless fullscreen restore to Monitor 1 (cross monitor)",
      "automation": "full",
      "backend": "x11",
      "ron_file": "fullscreen_borderless_to_mon1.ron",
      "validate": ["mode", "monitor_index"]
    },
    {
      "id": "x11_exclusive_0_0",
      "description": "Exclusive fullscreen restore to Monitor 0 (same monitor)",
      "automation": "full",
      "backend": "x11",
      "ron_file": "fullscreen_exclusive_to_mon0.ron",
      "validate": ["mode", "monitor_index"]
    },
    {
      "id": "x11_exclusive_0_1",
      "description": "Exclusive fullscreen restore to Monitor 1 (cross monitor)",
      "automation": "full",
      "backend": "x11",
      "ron_file": "fullscreen_exclusive_to_mon1.ron",
      "validate": ["mode", "monitor_index"]
    }
  ]
}
